<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>datasplash.api documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Datasplash</span> <span class="project-version">0.5.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datasplash</span></div></div></li><li class="depth-2 branch current"><a href="datasplash.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2 branch"><a href="datasplash.bq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bq</span></div></a></li><li class="depth-2 branch"><a href="datasplash.datastore.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datastore</span></div></a></li><li class="depth-2"><a href="datasplash.pubsub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pubsub</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="datasplash.api.html#var--.3E.3E"><div class="inner"><span>-&gt;&gt;</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-cogroup-by"><div class="inner"><span>cogroup-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-combine"><div class="inner"><span>combine</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-combine-by"><div class="inner"><span>combine-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-combine-fn"><div class="inner"><span>combine-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-concat"><div class="inner"><span>concat</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-cond-.3E.3E"><div class="inner"><span>cond-&gt;&gt;</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-context"><div class="inner"><span>context</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-count-fn"><div class="inner"><span>count-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-defoptions"><div class="inner"><span>defoptions</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-distinct"><div class="inner"><span>distinct</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-filename-policy"><div class="inner"><span>filename-policy</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-filter"><div class="inner"><span>filter</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-fixed-windows"><div class="inner"><span>fixed-windows</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-flatten"><div class="inner"><span>flatten</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-frequencies"><div class="inner"><span>frequencies</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-frequencies-fn"><div class="inner"><span>frequencies-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-from-edn"><div class="inner"><span>from-edn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-generate-input"><div class="inner"><span>generate-input</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-get-pipeline-configuration"><div class="inner"><span>get-pipeline-configuration</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-get-pipeline-options"><div class="inner"><span>get-pipeline-options</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-group-by"><div class="inner"><span>group-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-group-by-key"><div class="inner"><span>group-by-key</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-identity"><div class="inner"><span>identity</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-join-by"><div class="inner"><span>join-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-juxt"><div class="inner"><span>juxt</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-key"><div class="inner"><span>key</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-kv"><div class="inner"><span>make-kv</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-kv-coder"><div class="inner"><span>make-kv-coder</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-nippy-coder"><div class="inner"><span>make-nippy-coder</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-partition-mapping"><div class="inner"><span>make-partition-mapping</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-pipeline"><div class="inner"><span>make-pipeline</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-map"><div class="inner"><span>map</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-map-kv"><div class="inner"><span>map-kv</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-mapcat"><div class="inner"><span>mapcat</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-max-fn"><div class="inner"><span>max-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-mean-fn"><div class="inner"><span>mean-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-min-fn"><div class="inner"><span>min-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-pardo"><div class="inner"><span>pardo</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-partition-by"><div class="inner"><span>partition-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-partition-fn"><div class="inner"><span>partition-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-pt-.3E.3E"><div class="inner"><span>pt-&gt;&gt;</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-ptransform"><div class="inner"><span>ptransform</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-read-edn-file"><div class="inner"><span>read-edn-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-read-json-file"><div class="inner"><span>read-json-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-read-text-file"><div class="inner"><span>read-text-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-run-pipeline"><div class="inner"><span>run-pipeline</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-safe-exec"><div class="inner"><span>safe-exec</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-safe-exec-cfg"><div class="inner"><span>safe-exec-cfg</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-sample"><div class="inner"><span>sample</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-session-windows"><div class="inner"><span>session-windows</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-sfn"><div class="inner"><span>sfn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-side-inputs"><div class="inner"><span>side-inputs</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-side-outputs"><div class="inner"><span>side-outputs</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-sliding-windows"><div class="inner"><span>sliding-windows</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-sum-fn"><div class="inner"><span>sum-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-to-edn"><div class="inner"><span>to-edn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-val"><div class="inner"><span>val</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-view"><div class="inner"><span>view</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-wait-pipeline-result"><div class="inner"><span>wait-pipeline-result</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-with-keys"><div class="inner"><span>with-keys</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-with-timestamp"><div class="inner"><span>with-timestamp</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-edn-file"><div class="inner"><span>write-edn-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-edn-file-by"><div class="inner"><span>write-edn-file-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-json-file"><div class="inner"><span>write-json-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-text-file"><div class="inner"><span>write-text-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-text-file-by"><div class="inner"><span>write-text-file-by</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">datasplash.api</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var--.3E.3E"><h3>-&gt;&gt;</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(-&gt;&gt; nam input &amp; body)</code></div><div class="doc"><div class="markdown"><p>Creates and applies a single named PTransform from a sequence of transforms on a single PCollection. You can use it as you would use -&gt;&gt; in Clojure.</p>
<p>Example:</p>
<pre><code>(ds/pt-&gt;&gt; :transform-name input-pcollection
          (ds/map inc {:name :inc})
          (ds/filter even? {:name :even?}))
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L868">view source</a></div></div><div class="public anchor" id="var-cogroup-by"><h3>cogroup-by</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(cogroup-by options specs reduce-fn)</code><code>(cogroup-by options specs)</code></div><div class="doc"><div class="markdown"><p>Takes a specification of the join between pcolls and returns a PCollection of KVs (unless a :collector fn is given) with values being list of values corresponding to the key-fn. The specification is a list of triple [pcoll f options].</p>
<ul>
  <li>pcoll is a pcoll on which to join</li>
  <li>f is a joining function, used to produce the keys on which to join. Can be nil if the coll is already made up of KVs</li>
  <li>options is a map configuring each sides of the join</li>
</ul>
<p>Only one option is supported for now in join:</p>
<ul>
  <li>:type -&gt; :optional or :required to select between left and right join. Defaults to :optional</li>
</ul>
<p>Example:</p>
<pre><code>(ds/cogroup-by {:name :my-cogroup-by
                :collector (fn [[key [list-of-elts-from-pcoll1 list-of-elts-from-pcoll2]]]
                               [key (concat list-of-elts-from-pcoll1 list-of-elts-from-pcoll2)])}
               [[pcoll1 :id {:type :required}]
                [pcoll2 (fn [elt] (:foreign-key elt)) {:type :optional}]])

</code></pre>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/join/CoGroupByKey">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/join/CoGroupByKey</a> and for a different approach to joins see <a href="datasplash.api.html#var-join-by">join-by</a></p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>
  <p>:collector =&gt; A collector fn to apply after the cogroup. The signature is</p>
  <pre><code>(fn [[key [list-of-elts-from-pcoll1 list-of-elts-from-pcoll2]]] ...)
</code></pre></li>
  <li>:name =&gt; Adds a name to the Transform.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1457">view source</a></div></div><div class="public anchor" id="var-combine"><h3>combine</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(combine f {:keys [coder key-coder value-coder], :as options} pcoll)</code><code>(combine f pcoll)</code></div><div class="doc"><div class="markdown"><p>Applies a CombineFn or a Clojure function with equivalent arities to the PCollection of KVs.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine</a></p>
<p>Available options:</p>
<ul>
  <li>:as-singleton-view =&gt; The transform returns a PCollectionView whose elements are the result of combining elements per-window in the input PCollection.</li>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:fanout =&gt; Uses an intermediate node to combine parts of the data to reduce load on the final global combine step. Can be either an integer or a fn from key to integer (for combine-by-key scope).</li>
  <li>:scope =&gt; Specifies the combiner scope of application | One of [:global :per-key] | Defaults to :global</li>
  <li>:without-default =&gt; Empty windows will return an empty collection</li>
  <li>:without-defaults =&gt; Boolean indicating if the transform should attempt to provide a default value in the case of empty input.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1635">view source</a></div></div><div class="public anchor" id="var-combine-by"><h3>combine-by</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(combine-by key-fn f options pcoll)</code><code>(combine-by key-fn f pcoll)</code></div><div class="doc"><div class="markdown"><p>Shortcut to easily group values in a PColl by a function and combine all the values by key according to a combiner fn. Returns a PCollection of KVs.</p>
<p>Example:</p>
<pre><code>;; Returns a pcoll of two KVs, with false and true as keys, and the sum of even? and odd? numbers as values
(-&gt;&gt; pcoll
     (ds/combine-by even? (ds/sum-fn) {:name :my-combine-by}))
</code></pre>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine</a> and <a href="datasplash.api.html#var-combine-fn">combine-fn</a> for options about creating a combiner function (combine-fn is applied on the given clojure fn if necessary, you do not need to call it yourself)</p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:fanout =&gt; Uses an intermediate node to combine parts of the data to reduce load on the final global combine step. Can be either an integer or a fn from key to integer (for combine-by-key scope).</li>
  <li>:key-coder =&gt; Coder to be used for encoding keys in the resulting KV PColl.</li>
  <li>:value-coder =&gt; Coder to be used for encoding values in the resulting KV PColl.</li>
  <li>:without-defaults =&gt; Boolean indicating if the transform should attempt to provide a default value in the case of empty input.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1676">view source</a></div></div><div class="public anchor" id="var-combine-fn"><h3>combine-fn</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(combine-fn reducef extractf combinef initf output-coder acc-coder)</code><code>(combine-fn reducef extractf combinef initf output-coder)</code><code>(combine-fn reducef extractf combinef initf)</code><code>(combine-fn reducef extractf combinef)</code><code>(combine-fn reducef extractf)</code><code>(combine-fn reducef)</code></div><div class="doc"><div class="markdown"><p>Returns a CombineFn instance from given args. See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine.CombineFn.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine.CombineFn.html</a></p>
<p>Arguments in order:</p>
<ul>
  <li>
  <p>reducef: adds element to accumulator: fn of two arguments, returns updated accumulator</p>
  <pre><code>(fn [acc elt] (assoc acc (ds/key elt) (ds/val elt)))
</code></pre></li>
  <li>extractf: fn taking a single accumulator as arg and returning the final result. Defaults to identity</li>
  <li>
  <p>combinef: fn taking a variable number of accumulators and returning a single merged accumulator. Defaults to using the reduce fn</p>
  <pre><code>(fn [&amp; accs] (apply merge accs))
</code></pre></li>
  <li>
  <p>initf: fn of 0 args, returns empty accumulator. Defaults to reduce fn with no args</p>
  <pre><code>(fn [] {})
</code></pre></li>
  <li>output-coder: coder for the resulting PCollection. Defaults to nippy-coder</li>
  <li>acc-coder: coder for the accumulator. Defaults to nippy-coder</li>
</ul>
<p>This function is reminiscent of the reducers api. In has sensible defaults in order to reuse existing functions. For example, this a a perfectly valid combine-fn that sums all numbers in a pcoll:</p>
<pre><code>(combine-fn +)
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L633">view source</a></div></div><div class="public anchor" id="var-concat"><h3>concat</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(concat options &amp; colls)</code></div><div class="doc"><div class="markdown"><p>Returns a single PCollection containing all the given pcolls. Accepts an option map as an optional first arg.</p>
<p>Example:</p>
<pre><code>(ds/concat pcoll1 pcoll2)
(ds/concat {:name :concat-node} pcoll1 pcoll2)
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1594">view source</a></div></div><div class="public anchor" id="var-cond-.3E.3E"><h3>cond-&gt;&gt;</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.3</h4><div class="usage"><code>(cond-&gt;&gt; nam input &amp; body)</code></div><div class="doc"><div class="markdown"><p>Creates and applies a single named PTransform from a sequence of transforms on a single PCollection according to the results of the given predicates. You can use it as you would use cond-&gt;&gt; in Clojure.</p>
<p>Example:</p>
<pre><code>(ds/cond-&gt;&gt; :transform-name input-pcollection
          (:do-inc? config) (ds/map inc {:name :inc})
          (:do-filter? config) (ds/filter even? {:name :even?}))
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L886">view source</a></div></div><div class="public anchor" id="var-context"><h3>context</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(context)</code></div><div class="doc"><div class="markdown"><p>In the context of a ParDo, contains the corresponding Context object. See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/DoFn.ProcessContext.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/DoFn.ProcessContext.html</a></p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L224">view source</a></div></div><div class="public anchor" id="var-count-fn"><h3>count-fn</h3><div class="usage"><code>(count-fn &amp; {:keys [mapper predicate], :or {mapper (fn [_] 1), predicate (constantly true)}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1697">view source</a></div></div><div class="public anchor" id="var-defoptions"><h3>defoptions</h3><h4 class="type">macro</h4><div class="usage"><code>(defoptions interface-name specs)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/options.clj#L23">view source</a></div></div><div class="public anchor" id="var-distinct"><h3>distinct</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(distinct options pcoll)</code><code>(distinct pcoll)</code></div><div class="doc"><div class="markdown"><p>Removes duplicate element from PCollection.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/RemoveDuplicates.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/RemoveDuplicates.html</a></p>
<p>Example:</p>
<pre><code>(ds/distinct pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1536">view source</a></div></div><div class="public anchor" id="var-filename-policy"><h3>filename-policy</h3><h4 class="added">added in 0.5.2</h4><div class="usage"><code>(filename-policy options)</code></div><div class="doc"><div class="markdown"><p>Create a filename-policy object</p>
<p>Examples:</p>
<pre><code>(ds/filename-policy {:file-name "file"
                     :suffix "json"})

;; with custom functions
(require '[clj-time.format :as tf])

(defn windowed-fn
  [^FileBasedSink$FilenamePolicy$WindowedContext context _]
  (let [timestamp (tf/unparse (:date-hour-minute tf/formatters)
                              (.start (.getWindow context)))]
    (str "file-" timestamp ".txt")))

(ds/filename-policy {:windowed-fn windowed-fn
                     :unwindowed-fn (fn [_ _] "file.txt")})
</code></pre>
<p>Available options:</p>
<ul>
  <li>:file-name =&gt; set the default filename prefix (only used when no custom function is set)</li>
  <li>:suffix =&gt; set the default filename suffix (only used when no custom function is set)</li>
  <li>:unwindowed-fn =&gt; override the filename function for unwindowed PCollection</li>
  <li>:windowed-fn =&gt; override the filename function for windowed PCollection</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1897">view source</a></div></div><div class="public anchor" id="var-filter"><h3>filter</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(filter pred pcoll)</code><code>(filter f options pcoll)</code></div><div class="doc"><div class="markdown"><p>Returns a PCollection that only contains the items for which (pred item) returns true.</p>
<p>Example:</p>
<pre><code>    (ds/filter even? foo)
(ds/filter (fn [x] (even? (* x x))) foo)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.</li>
  <li>:side-outputs =&gt; Defines as a seq of keywords the output tags for the underlying ParDo Transform. The map fn should return a map with keys set to the same set of keywords.</li>
  <li>:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L594">view source</a></div></div><div class="public anchor" id="var-fixed-windows"><h3>fixed-windows</h3><h4 class="added">added in 0.5.0</h4><div class="usage"><code>(fixed-windows width options pcoll)</code><code>(fixed-windows width pcoll)</code></div><div class="doc"><div class="markdown"><p>Apply a fixed window input PCollection (useful for unbounded PCollections).</p>
<p>See <a href="https://cloud.google.com/dataflow/model/windowing#setting-fixed-time-windows">https://cloud.google.com/dataflow/model/windowing#setting-fixed-time-windows</a></p>
<p>Example:</p>
<pre><code>(require '[clj-time.core :as time])
(ds/fixed-windows (time/minutes 30) pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:accumulate-mode =&gt; Accumulate mode when a Trigger is fired (accumulate or discard)</li>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:trigger =&gt; Adds a Trigger to the Window.</li>
  <li>:with-allowed-lateness =&gt; Allow late data. Mandatory for custom trigger</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1815">view source</a></div></div><div class="public anchor" id="var-flatten"><h3>flatten</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(flatten options pcoll)</code><code>(flatten pcoll)</code></div><div class="doc"><div class="markdown"><p>Returns a single Pcollection containing all the pcolls in the given pcolls iterable.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Flatten.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Flatten.html</a></p>
<p>Example:</p>
<pre><code>(ds/flatten [pcoll1 pcoll2 pcoll3])
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1579">view source</a></div></div><div class="public anchor" id="var-frequencies"><h3>frequencies</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(frequencies options pcoll)</code><code>(frequencies pcoll)</code></div><div class="doc"><div class="markdown"><p>Returns the frequency of each unique element of the input PCollection.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Count.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Count.html</a></p>
<p>Example:</p>
<pre><code>(ds/frequencies pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1779">view source</a></div></div><div class="public anchor" id="var-frequencies-fn"><h3>frequencies-fn</h3><div class="usage"><code>(frequencies-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1766">view source</a></div></div><div class="public anchor" id="var-from-edn"><h3>from-edn</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L729">view source</a></div></div><div class="public anchor" id="var-generate-input"><h3>generate-input</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(generate-input coll options p)</code><code>(generate-input coll p)</code></div><div class="doc"><div class="markdown"><p>Generates a pcollection from the given collection. See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Create.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Create.html</a></p>
<p>Example:</p>
<pre><code>(ds/generate-input (range 0 1000) pipeline)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L609">view source</a></div></div><div class="public anchor" id="var-get-pipeline-configuration"><h3>get-pipeline-configuration</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(get-pipeline-configuration)</code></div><div class="doc"><div class="markdown"><p>Returns a map corresponding to the bean of configuration the current pipeline was run with. Must be called inside a function wrapping a ParDo, e.g. ds/map or ds/mapcat.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1041">view source</a></div></div><div class="public anchor" id="var-get-pipeline-options"><h3>get-pipeline-options</h3><h4 class="added">added in 0.5.2</h4><div class="usage"><code>(get-pipeline-options pipeline)</code></div><div class="doc"><div class="markdown"><p>Returns a map corresponding to the bean of options the given pipeline was built with. Must be called on a <code>PipelineWithOptions</code> object produced by <code>make-pipeline</code>.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1032">view source</a></div></div><div class="public anchor" id="var-group-by"><h3>group-by</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(group-by f {:keys [key-coder value-coder coder], :as options} pcoll)</code><code>(group-by f pcoll)</code></div><div class="doc"><div class="markdown"><p>Groups a Pcollection by the result of calling (f item) for each item.</p>
<p>This produces a sequence of KV values, similar to using seq with a map. Each value will be a list of the values that match key.</p>
<p>Example:</p>
<pre><code>    (ds/group-by :a foo)
(ds/group-by count foo)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L914">view source</a></div></div><div class="public anchor" id="var-group-by-key"><h3>group-by-key</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(group-by-key {:keys [key-coder value-coder coder], :as options} pcoll)</code><code>(group-by-key pcoll)</code></div><div class="doc"><div class="markdown"><p>Takes a KV PCollection as input and returns a KV PCollection as output of K to list of V.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/GroupByKey.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/GroupByKey.html</a></p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L838">view source</a></div></div><div class="public anchor" id="var-identity"><h3>identity</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(identity c)</code></div><div class="doc"><div class="markdown"><p>Identity function for use in a ParDo</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L365">view source</a></div></div><div class="public anchor" id="var-join-by"><h3>join-by</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(join-by {nam :name, :as options} specs join-fn)</code><code>(join-by options specs)</code></div><div class="doc"><div class="markdown"><p>Takes a specification of the join between pcolls and returns a PCollection of the cartesian product (only difference from cogroup-by) of all elements joined according to the spec. The specification is a list of triple [pcoll f options].</p>
<ul>
  <li>pcoll is a pcoll on which to join</li>
  <li>f is a joining function, used to produce the keys on which to join. Can be nil if the coll is already made up of KVs</li>
  <li>options is a map configuring each sides of the join</li>
</ul>
<p>Only one option is supported for now in join:</p>
<ul>
  <li>:type -&gt; :optional or :required to select between left and right join. Defaults to :optional</li>
</ul>
<p>Example:</p>
<pre><code>(ds/join-by {:name :my-join-by
                :collector (fn [elt1 elt2]
                               (merge elt1 elt2))}
               [[pcoll1 :id {:type :required}]
                [pcoll2 (fn [elt] (:foreign-key elt)) {:type :optional}]])

</code></pre>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/join/CoGroupByKey">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/join/CoGroupByKey</a> and for a different approach to joins see <a href="datasplash.api.html#var-cogroup-by">cogroup-by</a></p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:collector =&gt; A collector fn to apply after the join. The signature is like map, one element for each pcoll in the join.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1491">view source</a></div></div><div class="public anchor" id="var-juxt"><h3>juxt</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(juxt &amp; fns)</code></div><div class="doc"><div class="markdown"><p>Creates a CombineFn that applies multiple combiners in one go. Produces a vector of combined results. ‘sibling fusion’ in Dataflow optimizes multiple independant combiners in the same way, but you might find juxt more concise.</p>
<p>Only works with functions created with combine-fn or native clojure functions, and not with native Dataflow CombineFn</p>
<p>Example:</p>
<pre><code>(ds/combine (ds/juxt + *) pcoll)
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L776">view source</a></div></div><div class="public anchor" id="var-key"><h3>key</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(key elt)</code></div><div class="doc"><div class="markdown"><p>Returns the key part of a KV or MapEntry.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L172">view source</a></div></div><div class="public anchor" id="var-make-kv"><h3>make-kv</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-kv k v)</code><code>(make-kv kv)</code></div><div class="doc"><div class="markdown"><p>Returns a KV object from the given arg(s), either [k v] or a MapEntry or seq of two elements.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L165">view source</a></div></div><div class="public anchor" id="var-make-kv-coder"><h3>make-kv-coder</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-kv-coder k-coder v-coder)</code><code>(make-kv-coder)</code></div><div class="doc"><div class="markdown"><p>Returns an instance of a KvCoder using by default nippy for serialization.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L397">view source</a></div></div><div class="public anchor" id="var-make-nippy-coder"><h3>make-nippy-coder</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-nippy-coder)</code></div><div class="doc"><div class="markdown"><p>Returns an instance of a CustomCoder using nippy for serialization</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L371">view source</a></div></div><div class="public anchor" id="var-make-partition-mapping"><h3>make-partition-mapping</h3><div class="usage"><code>(make-partition-mapping coll)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1276">view source</a></div></div><div class="public anchor" id="var-make-pipeline"><h3>make-pipeline</h3><h4 class="type">macro</h4><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-pipeline &amp; args)</code></div><div class="doc"><div class="markdown"><p>Builds a Pipeline from command lines args and configuration. Also accepts a jobNameTemplate param which is a string in which the following var are interpolated:</p>
<ul>
  <li>%A -&gt; Application name</li>
  <li>%U -&gt; User name</li>
  <li>%T -&gt; Timestamp</li>
</ul>
<p>It means the template %A-%U-%T is equivalent to the default jobName</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L996">view source</a></div></div><div class="public anchor" id="var-map"><h3>map</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(map f pcoll)</code><code>(map f options pcoll)</code></div><div class="doc"><div class="markdown"><p>Returns a PCollection of f applied to every item in the source PCollection. Function f should be a function of one argument.</p>
<p>Example:</p>
<pre><code>(ds/map inc foo)
(ds/map (fn [x] (* x x)) foo)
</code></pre>
<p>Note: Unlike clojure.core/map, datasplash.api/map takes only one PCollection.</p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.</li>
  <li>:side-outputs =&gt; Defines as a seq of keywords the output tags for the underlying ParDo Transform. The map fn should return a map with keys set to the same set of keywords.</li>
  <li>:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L545">view source</a></div></div><div class="public anchor" id="var-map-kv"><h3>map-kv</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(map-kv f pcoll)</code><code>(map-kv f options pcoll)</code></div><div class="doc"><div class="markdown"><p>Returns a KV PCollection of f applied to every item in the source PCollection. Function f should be a function of one argument and return seq of keys/values.</p>
<p>Example:</p>
<pre><code>(ds/map (fn [{:keys [month revenue]}] [month revenue]) foo)
</code></pre>
<p>Note: Unlike clojure.core/map, datasplash.api/map-kv takes only one PCollection.</p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.</li>
  <li>:side-outputs =&gt; Defines as a seq of keywords the output tags for the underlying ParDo Transform. The map fn should return a map with keys set to the same set of keywords.</li>
  <li>:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L563">view source</a></div></div><div class="public anchor" id="var-mapcat"><h3>mapcat</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(mapcat f pcoll)</code><code>(mapcat f options pcoll)</code></div><div class="doc"><div class="markdown"><p>Returns the result of applying concat, or flattening, the result of applying f to each item in the PCollection. Thus f should return a Clojure or Java collection.</p>
<p>Example:</p>
<pre><code>(ds/mapcat (fn [x] [(dec x) x (inc x)]) foo)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.</li>
  <li>:side-outputs =&gt; Defines as a seq of keywords the output tags for the underlying ParDo Transform. The map fn should return a map with keys set to the same set of keywords.</li>
  <li>:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L580">view source</a></div></div><div class="public anchor" id="var-max-fn"><h3>max-fn</h3><div class="usage"><code>(max-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1734">view source</a></div></div><div class="public anchor" id="var-mean-fn"><h3>mean-fn</h3><div class="usage"><code>(mean-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1719">view source</a></div></div><div class="public anchor" id="var-min-fn"><h3>min-fn</h3><div class="usage"><code>(min-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1750">view source</a></div></div><div class="public anchor" id="var-pardo"><h3>pardo</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(pardo f pcoll)</code><code>(pardo f options pcoll)</code></div><div class="doc"><div class="markdown"><p>Uses a raw pardo-fn as a ppardo transform Function f should be a function of one argument, the Pardo$Context object.</p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.</li>
  <li>:side-outputs =&gt; Defines as a seq of keywords the output tags for the underlying ParDo Transform. The map fn should return a map with keys set to the same set of keywords.</li>
  <li>:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L535">view source</a></div></div><div class="public anchor" id="var-partition-by"><h3>partition-by</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(partition-by f num options pcoll)</code><code>(partition-by f num pcoll)</code></div><div class="doc"><div class="markdown"><p>Partitions the content of pcoll according to the PartitionFn. See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Partition">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Partition</a>. The partition function is given two arguments: the current element and the number of partitions.</p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L754">view source</a></div></div><div class="public anchor" id="var-partition-fn"><h3>partition-fn</h3><div class="usage"><code>(partition-fn f)</code></div><div class="doc"><div class="markdown"><p>Returns a Partition.PartitionFn if possible</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L743">view source</a></div></div><div class="public anchor" id="var-pt-.3E.3E"><h3>pt-&gt;&gt;</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(pt-&gt;&gt; nam input &amp; body)</code></div><div class="doc"><div class="markdown"><p>Creates and applies a single named PTransform from a sequence of transforms on a single PCollection. You can use it as you would use -&gt;&gt; in Clojure.</p>
<p>Example:</p>
<pre><code>(ds/pt-&gt;&gt; :transform-name input-pcollection
          (ds/map inc {:name :inc})
          (ds/filter even? {:name :even?}))
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L868">view source</a></div></div><div class="public anchor" id="var-ptransform"><h3>ptransform</h3><h4 class="type">macro</h4><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(ptransform nam input &amp; body)</code></div><div class="doc"><div class="markdown"><p>Generates a PTransform with the given name, apply signature and body. Should rarely by used in user code, see <a href="datasplash.api.html#var-pt-.3E.3E">pt-&gt;&gt;</a> for the more general use case in application code.</p>
<p>Example (actual implementation of the group-by transform):</p>
<pre><code>(ptransform
 :group-by
 [^PCollection pcoll]
 (-&gt;&gt; pcoll
      (ds/with-keys f opts)
      (ds/group-by-key opts)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L849">view source</a></div></div><div class="public anchor" id="var-read-edn-file"><h3>read-edn-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(read-edn-file from options p)</code><code>(read-edn-file from p)</code></div><div class="doc"><div class="markdown"><p>Reads a PCollection of edn strings from disk or Google Storage, with records separated by newlines.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html</a></p>
<p>Example:</p>
<pre><code>(read-edn-file "gs://target/path" pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:compression-type =&gt; Choose compression type. :auto by default. | One of (:auto :bzip2 :gzip :uncompressed)</li>
  <li>:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1157">view source</a></div></div><div class="public anchor" id="var-read-json-file"><h3>read-json-file</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(read-json-file from {:keys [key-fn return-type], :as options} p)</code><code>(read-json-file from p)</code></div><div class="doc"><div class="markdown"><p>Reads a PCollection of JSON strings from disk or Google Storage, with records separated by newlines.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html</a> and <a href="https://github.com/dakrone/cheshire#decoding">https://github.com/dakrone/cheshire#decoding</a> for details on options.</p>
<p>Example:</p>
<pre><code>(read-json-file "gs://target/path" pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:compression-type =&gt; Choose compression type. :auto by default. | One of (:auto :bzip2 :gzip :uncompressed)</li>
  <li>:key-fn =&gt; Selects a policy for parsing map keys. If true, keywordizes the keys. If given a fn, uses it to transform each map key.</li>
  <li>:return-type =&gt; Allows passing in a function to specify what kind of types to return.</li>
  <li>:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1206">view source</a></div></div><div class="public anchor" id="var-read-text-file"><h3>read-text-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(read-text-file from options p)</code><code>(read-text-file from p)</code></div><div class="doc"><div class="markdown"><p>Reads a PCollection of Strings from disk or Google Storage, with records separated by newlines.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html</a></p>
<p>Example:</p>
<pre><code>(read-text-file "gs://target/path" pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:compression-type =&gt; Choose compression type. :auto by default. | One of (:auto :bzip2 :gzip :uncompressed)</li>
  <li>:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1134">view source</a></div></div><div class="public anchor" id="var-run-pipeline"><h3>run-pipeline</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(run-pipeline topology)</code></div><div class="doc"><div class="markdown"><p>Run the computation for a given pipeline or PCollection.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1009">view source</a></div></div><div class="public anchor" id="var-safe-exec"><h3>safe-exec</h3><h4 class="type">macro</h4><div class="usage"><code>(safe-exec &amp; body)</code></div><div class="doc"><div class="markdown"><p>Executes body while trying to sanely require missing ns if the runtime is not yet properly loaded for Clojure in distributed mode. Always wrap try block with this if you intend to eat every Exception produced.</p>
<pre><code>(ds/map (fn [elt]
          (try
            (ds/safe-exec (dangerous-parse-fn elt))
            (catch Exception e
              (log/error e "parsing error"))))
        pcoll)
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L152">view source</a></div></div><div class="public anchor" id="var-safe-exec-cfg"><h3>safe-exec-cfg</h3><h4 class="type">macro</h4><div class="usage"><code>(safe-exec-cfg config &amp; body)</code></div><div class="doc"><div class="markdown"><p>Like <a href="datasplash.api.html#var-safe-exec">safe-exec</a>, but takes a map as first argument containing the name of the ptransform for better error message</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L99">view source</a></div></div><div class="public anchor" id="var-sample"><h3>sample</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(sample size {:keys [scope], :as options} pcoll)</code><code>(sample size pcoll)</code></div><div class="doc"><div class="markdown"><p>Takes samples of the elements in a PCollection, or samples of the values associated with each key in a PCollection of KVs.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Sample.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Sample.html</a></p>
<p>Example:</p>
<pre><code>    (ds/sample 100 {:scope :per-key} pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:scope =&gt; Scope given to the combinating operation. One of (:globally :per-key).</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1556">view source</a></div></div><div class="public anchor" id="var-session-windows"><h3>session-windows</h3><h4 class="added">added in 0.4.1</h4><div class="usage"><code>(session-windows gap options pcoll)</code><code>(session-windows gap pcoll)</code></div><div class="doc"><div class="markdown"><p>Apply a Session window to divide a PCollection (useful for unbounded PCollections).</p>
<p>See <a href="https://cloud.google.com/dataflow/model/windowing#setting-session-windows">https://cloud.google.com/dataflow/model/windowing#setting-session-windows</a></p>
<p>Example:</p>
<pre><code>(require '[clj-time.core :as time])
(ds/session-windows (time/minutes 10) pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:accumulate-mode =&gt; Accumulate mode when a Trigger is fired (accumulate or discard)</li>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:trigger =&gt; Adds a Trigger to the Window.</li>
  <li>:with-allowed-lateness =&gt; Allow late data. Mandatory for custom trigger</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1856">view source</a></div></div><div class="public anchor" id="var-sfn"><h3>sfn</h3><div class="usage"><code>(sfn f)</code></div><div class="doc"><div class="markdown"><p>Returns an instance of SerializableFunction equivalent to f.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L731">view source</a></div></div><div class="public anchor" id="var-side-inputs"><h3>side-inputs</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(side-inputs)</code></div><div class="doc"><div class="markdown"><p>In the context of a ParDo, returns the corresponding side inputs as a map from names to values.</p>
<p>Example:</p>
<pre><code>    (let [input (ds/generate-input [1 2 3 4 5] p)
          side-input (ds/view (ds/generate-input [{1 :a 2 :b 3 :c 4 :d 5 :e}] p))
          proc (ds/map (fn [x] (get-in (ds/side-inputs) [:mapping x]))
                       {:side-inputs {:mapping side-input}} input)])
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L230">view source</a></div></div><div class="public anchor" id="var-side-outputs"><h3>side-outputs</h3><div class="usage"><code>(side-outputs &amp; kvs)</code></div><div class="doc"><div class="markdown"><p>Returns multiple outputs keyed by keyword.  Example:  <code>
(let [input (ds/generate-input [1 2 3 4 5] p)
      ;; simple and multi are pcoll with their respective elements)
      {:keys [simple multi]} (ds/map (fn [x] (ds/side-outputs :simple x :multi (* x 10)))
                                     {:side-outputs [:simple :multi]} input)])
</code></p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L255">view source</a></div></div><div class="public anchor" id="var-sliding-windows"><h3>sliding-windows</h3><h4 class="added">added in 0.4.1</h4><div class="usage"><code>(sliding-windows width step options pcoll)</code><code>(sliding-windows width step pcoll)</code></div><div class="doc"><div class="markdown"><p>Apply a sliding window to divide a PCollection (useful for unbounded PCollections).</p>
<p>See <a href="https://cloud.google.com/dataflow/model/windowing#setting-sliding-time-windows">https://cloud.google.com/dataflow/model/windowing#setting-sliding-time-windows</a></p>
<p>Example:</p>
<pre><code>(require '[clj-time.core :as time])
(ds/sliding-windows (time/minutes 30) (time/seconds 5) pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:accumulate-mode =&gt; Accumulate mode when a Trigger is fired (accumulate or discard)</li>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:name =&gt; Adds a name to the Transform.</li>
  <li>:trigger =&gt; Adds a Trigger to the Window.</li>
  <li>:with-allowed-lateness =&gt; Allow late data. Mandatory for custom trigger</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1835">view source</a></div></div><div class="public anchor" id="var-sum-fn"><h3>sum-fn</h3><div class="usage"><code>(sum-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1707">view source</a></div></div><div class="public anchor" id="var-to-edn"><h3>to-edn</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L728">view source</a></div></div><div class="public anchor" id="var-val"><h3>val</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(val elt)</code></div><div class="doc"><div class="markdown"><p>Returns the value part of a KV or MapEntry.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L181">view source</a></div></div><div class="public anchor" id="var-view"><h3>view</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(view {:keys [type], :or {type :singleton}, :as options} pcoll)</code><code>(view pcoll)</code></div><div class="doc"><div class="markdown"><p>Produces a View out of a PColl, to be later consumed as a side-input for example. See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/">https://cloud.google.com/dataflow/java-sdk/JavaDoc/</a></p>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:default =&gt; Sets a default value for SingletonView</li>
  <li>:type =&gt; Type of View | One of [:singleton :iterable :list :map :multi-map] | Defaults to :singleton</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L703">view source</a></div></div><div class="public anchor" id="var-wait-pipeline-result"><h3>wait-pipeline-result</h3><h4 class="added">added in 0.5.1</h4><div class="usage"><code>(wait-pipeline-result pip-res timeout)</code><code>(wait-pipeline-result pip-res)</code></div><div class="doc"><div class="markdown"><p>Blocks until this PipelineResult finishes. Returns the final state.</p></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1019">view source</a></div></div><div class="public anchor" id="var-with-keys"><h3>with-keys</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(with-keys f {:keys [key-coder value-coder coder], :as options} pcoll)</code><code>(with-keys f pcoll)</code></div><div class="doc"><div class="markdown"><p>Returns a PCollection of KV by applying f on each element of the input PColelction and using the return value as the key and the element as the value.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/WithKeys.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/WithKeys.html</a></p>
<p>Example:</p>
<pre><code>(with-keys even? pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:key-coder =&gt; Coder to be used for encoding keys in the resulting KV PColl.</li>
  <li>:value-coder =&gt; Coder to be used for encoding values in the resulting KV PColl.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L815">view source</a></div></div><div class="public anchor" id="var-with-timestamp"><h3>with-timestamp</h3><div class="usage"><code>(with-timestamp timestamp result)</code></div><div class="doc"><div class="markdown"><p>Returns element(s) with the given timestamp as Timestamp. Anything that can be coerced by clj-time can be given as input.  It can be nested inside a <code>(side-outputs)</code> or outside (in which case it applies to all results).  Exemple:</p>
<pre><code>(ds/map (fn [e] (ds/with-timestamp (clj-time.core/now) (* 2 e)) pcoll))
</code></pre></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L269">view source</a></div></div><div class="public anchor" id="var-write-edn-file"><h3>write-edn-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(write-edn-file to options pcoll)</code><code>(write-edn-file to pcoll)</code></div><div class="doc"><div class="markdown"><p>Writes a PCollection of data to disk or Google Storage, with edn records separated by newlines.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html</a></p>
<p>Example:</p>
<pre><code>(write-edn-file "gs://target/path" pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:compression-type =&gt; Choose compression type. | One of (:bzip2 :deflate :gzip :uncompressed)</li>
  <li>:filename-policy =&gt; Use withFilenamePolicy (see filename-policy fn)</li>
  <li>:num-shards =&gt; Selects the desired number of output shards (file fragments). 0 to let the system decide (recommended).</li>
  <li>:shard-name-template =&gt; Uses the given shard name template.</li>
  <li>:suffix =&gt; Uses the given filename suffix.</li>
  <li>:windowed =&gt; Make windowed writes</li>
  <li>:without-sharding =&gt; Forces a single file output.</li>
  <li>:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1181">view source</a></div></div><div class="public anchor" id="var-write-edn-file-by"><h3>write-edn-file-by</h3><h4 class="deprecated">deprecated in 0.2.0</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1312">view source</a></div></div><div class="public anchor" id="var-write-json-file"><h3>write-json-file</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(write-json-file to options pcoll)</code><code>(write-json-file to pcoll)</code></div><div class="doc"><div class="markdown"><p>Writes a PCollection of data to disk or Google Storage, with JSON records separated by newlines.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html</a> and <a href="https://github.com/dakrone/cheshire#encoding">https://github.com/dakrone/cheshire#encoding</a> for details on options</p>
<p>Example:</p>
<pre><code>(write-json-file "gs://target/path" pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:compression-type =&gt; Choose compression type. | One of (:bzip2 :deflate :gzip :uncompressed)</li>
  <li>:date-format =&gt; Pattern for encoding java.util.Date objects. Defaults to yyyy-MM-dd’T’HH:mm:ss’Z’</li>
  <li>:escape-non-ascii =&gt; Generate JSON escaping UTF-8.</li>
  <li>:filename-policy =&gt; Use withFilenamePolicy (see filename-policy fn)</li>
  <li>:key-fn =&gt; Generate JSON and munge keys with a custom function.</li>
  <li>:num-shards =&gt; Selects the desired number of output shards (file fragments). 0 to let the system decide (recommended).</li>
  <li>:shard-name-template =&gt; Uses the given shard name template.</li>
  <li>:suffix =&gt; Uses the given filename suffix.</li>
  <li>:windowed =&gt; Make windowed writes</li>
  <li>:without-sharding =&gt; Forces a single file output.</li>
  <li>:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1253">view source</a></div></div><div class="public anchor" id="var-write-text-file"><h3>write-text-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(write-text-file to options pcoll)</code><code>(write-text-file to pcoll)</code></div><div class="doc"><div class="markdown"><p>Writes a PCollection of Strings to disk or Google Storage, with records separated by newlines.</p>
<p>See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html</a></p>
<p>Example:</p>
<pre><code>    (write-text-file "gs://target/path" pcoll)
</code></pre>
<p>Available options:</p>
<ul>
  <li>:checkpoint =&gt; Given a path, will store the resulting pcoll at this path in edn to facilitate dev/debug.</li>
  <li>:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</li>
  <li>:compression-type =&gt; Choose compression type. | One of (:bzip2 :deflate :gzip :uncompressed)</li>
  <li>:filename-policy =&gt; Use withFilenamePolicy (see filename-policy fn)</li>
  <li>:num-shards =&gt; Selects the desired number of output shards (file fragments). 0 to let the system decide (recommended).</li>
  <li>:shard-name-template =&gt; Uses the given shard name template.</li>
  <li>:suffix =&gt; Uses the given filename suffix.</li>
  <li>:windowed =&gt; Make windowed writes</li>
  <li>:without-sharding =&gt; Forces a single file output.</li>
  <li>:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1112">view source</a></div></div><div class="public anchor" id="var-write-text-file-by"><h3>write-text-file-by</h3><h4 class="deprecated">deprecated in 0.2.0</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/v0.5.2/src/clj/datasplash/core.clj#L1313">view source</a></div></div></div></body></html>